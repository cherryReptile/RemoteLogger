syntax = "proto3";

package logger.v1;
option go_package = "/api";

//import "google/protobuf/timestamp.proto";

service AuthAppService {
  rpc Register(AppRequest) returns (AppResponse) {}
  rpc Login(AppRequest) returns (AppResponse) {}
  rpc AddAccount(AddAppRequest) returns (AddedResponse) {}
}

service AuthGithubService {
  rpc Login(GitHubRequest) returns (AppResponse) {}
  rpc AddAccount(AddGitHubRequest) returns (AddedResponse) {}
}

service AuthGoogleService {
  rpc Login(GoogleRequest) returns (AppResponse) {}
  rpc AddAccount(AddGoogleRequest) returns (AddedResponse) {}
}

service AuthTelegramService {
  rpc Login(TelegramRequest) returns (AppResponse) {}
}

service CheckAuthService {
  rpc CheckAuth(TokenRequest) returns (CheckAuthResponse) {}
}

service LogoutService {
  rpc Logout(TokenRequest) returns (LogoutResponse) {}
}

message AppRequest {
  string Email = 1;
  string Password = 2;
}

message AddAppRequest {
  AppRequest Request = 1;
  string UserUUID = 2;
}

message GitHubRequest {
  string Login = 1;
  bytes Data = 2;
}

message AddGitHubRequest {
  GitHubRequest Request = 1;
  string UserUUID = 2;
}

message GoogleRequest {
  string Email = 1;
  bytes  Data = 2;
}

message AddGoogleRequest {
  GoogleRequest Request = 1;
  string UserUUID = 2;
}

message TelegramRequest {
  string Username = 1;
}

message AppResponse {
  User Struct = 1;
  string TokenStr = 2;
}

message AddedResponse {
  User  Struct = 1;
  string Message = 2;
}

message TokenRequest {
  string Token = 1;
}

message LogoutResponse {
  string Message = 1;
}

message CheckAuthResponse {
  string UserUUID = 1;
}

message User {
  string UUID = 1;
  string Login = 2;
  string CreatedAt = 5;
}